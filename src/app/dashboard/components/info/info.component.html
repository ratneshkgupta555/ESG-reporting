<div class="main-section">
    <h2>Retrieve all uploaded ESG Reports</h2>
    <mat-progress-spinner *ngIf="loading" mode="indeterminate"></mat-progress-spinner>
    
    <div [ngClass]="loading ? 'disabled': ''">
      <div class="control">
        <div class="label-name">Year Of Report</div>
        <div class="value-part">
            <input [(ngModel)]="yearOfReport" type="number" [min]="minYear" [max]="maxYear" placeholder="Enter year of report..." />
            <div class="info-control">
                <mat-icon class="material-icons info-icon">info</mat-icon>
                <div class="range-text">Range between {{minYear}} - {{maxYear}}</div>
            </div>
        </div>
    </div>
    <div class="action-buttons">
        <button [disabled]="!(yearOfReport && yearOfReport <= 2024 && yearOfReport >= 1900)" mat-raised-button (click)="onRetriveClick()">Retrive All</button>
    </div>
    <div class="display-report-section" *ngIf="dataSource.data.length > 0">
        <mat-table #table [dataSource]="dataSource">

            <ng-container matColumnDef="documentName">
              <mat-header-cell *matHeaderCellDef> Document Name </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.documentName}} </mat-cell>
            </ng-container>
        
            <ng-container matColumnDef="documentType">
              <mat-header-cell *matHeaderCellDef> Document Type </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.documentType}} </mat-cell>
            </ng-container>
        
            <ng-container matColumnDef="referenceLink">
              <mat-header-cell *matHeaderCellDef> Reference Link </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.referenceLink}} </mat-cell>
            </ng-container>
        
            <ng-container matColumnDef="generatedBy">
              <mat-header-cell *matHeaderCellDef> Generated By </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.generatedBy}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="reportYear">
                <mat-header-cell *matHeaderCellDef> Report Year</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.reportYear}} </mat-cell>
              </ng-container>
          
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          </mat-table>
    </div>
    <div class="nodata-message" *ngIf="dataSource.data.length === 0">
        <div class="info-control">
            <mat-icon class="material-icons info-icon">info</mat-icon>
            <div class="range-text">No data available.</div>
        </div>
    </div>
    </div>
</div>